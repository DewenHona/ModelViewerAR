<html>

<head>
    <title>HearIt!</title>

    <!-- CUSTOM CSS and JS -->
    <link rel="stylesheet" href="./styles.css">

    <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    

</head>

<body>

    <model-viewer src="./assets/models/bell.glb" poster="./assets/images/bell.png" shadow-intensity="1" ar
        ar-modes="webxr scene-viewer quick-look" camera-controls alt=" A 3D model carousel" environment-image="neutral">

        <div id="story-card">
            Story
        </div>

        <!-- Annotations for ASTRONAUT-->
        <!-- <button class="anno-btn" slot="hotspot-visor" data-position="0 1.75 0.35" data-normal="0 0 1">Helmet</button>
        <button slot="hotspot-hand" data-position="-0.54 0.93 0.1" data-normal="-0.73 0.05 0.69">Hand
            <button slot="hotspot-foot" data-position="0.16 0.1 0.17" data-normal="-0.07 0.97 0.23"
                data-visibility-attribute="visible">Legs</button> -->
            <!-- Annotations-end -->

            <button slot="ar-button" id="ar-button">&nbsp;AR</button>

            <div id="ar-prompt">
                <img src="./assets/images/hand.png">
            </div>

            <button id="ar-failure">
                AR is not tracking!
            </button>

            <!-- button audio-start -->
            <audio loop id="sound-aud" src="/assets/audio/bell.wav" preload="auto"></audio>
            <button id="sound-btn" onclick="document.getElementById('sound-aud').play();">Audio</button>
            <!-- button audio-end -->

            <!-- interactions-Start -->
            <div id="interactions">

                <div id="story">
                    <!-- Slider-start -->
                    <div class="slider">
                        <div class="slides">
                
                            
                
                            
                
                            <!-- NEW MODELS -->
                
                            <button class="slide music" onclick="switchSrc(this, 'bell');changecontext('Bell','Place')"
                                style="background-image: url('./assets/images/bell.png');">
                            </button>

                            <button id="robot-button" class="slide music" onclick="switchSrc(this, 'flute');changecontext('Flute','Place')"
                                style="background-image: url('./assets/images/flute.png');">
                            </button>
                
                            <button id="earth-button" class="slide objects" onclick="switchSrc(this, 'bus');changecontext('Bus','Place');"
                                style="background-image: url('./assets/images/bus.png');">
                            </button>
                
                            <button id="robot-button" class="slide objects" onclick="switchSrc(this, 'car');changecontext('Car','Place')"
                                style="background-image: url('./assets/images/car.png');">
                            </button>
                
                
                            <button class="slide animals" onclick="switchSrc(this, 'fox');changecontext('Fox','Animal')"
                                style="background-image: url('./assets/images/fox.png');">
                            </button>

                            <button class="slide animals" onclick="switchSrc(this, 'cat');changecontext('Cat','Place')"
                                style="background-image: url('./assets/images/cat.png');">
                            </button>
                
                            <button class="slide animals" onclick="switchSrc(this, 'cow');changecontext('Cow','Place')"
                                style="background-image: url('./assets/images/cow.png');">
                            </button>
                
                            <button class="slide animals" onclick="switchSrc(this, 'crow');changecontext('Crow','Place')"
                                style="background-image: url('./assets/images/crow.png');">
                            </button>
                
                           
                
                
                            <button class="slide animals" onclick="switchSrc(this, 'parrot');changecontext('Parrot','Place')"
                                style="background-image: url('./assets/images/parrot.png');">
                            </button>
                
                            <button class="slide animals" onclick="switchSrc(this, 'peacock');changecontext('Peacock','Place')"
                                style="background-image: url('./assets/images/peacock.png');">
                            </button>
                
                            <button class="slide animals" onclick="switchSrc(this, 'tiger');changecontext('Tiger','Place')"
                                style="background-image: url('./assets/images/tiger.png');">
                            </button>
                
                            <button class="slide animals" onclick="switchSrc(this, 'indianRhino');changecontext('Indian Rhino','Place')"
                                style="background-image: url('./assets/images/indianRhino.png');">
                            </button>
                
                            <button id="earth-button" class="slide" onclick="switchSrc(this, 'earth');changecontext('Earth','Place')"
                                style="background-image: url('./assets/images/earth.png');">
                            </button>
                            
                            <button id="robot-button" class="slide" onclick="switchSrc(this, 'RobotExpressive');changecontext('Robot','Place')"
                                style="background-image: url('./assets/images/RobotExpressive.png');">
                            </button>
                            
                            
                            <button class="slide" onclick="switchSrc(this, 'Astronaut');changecontext('Astronaut','Place')"
                                style="background-image: url('./assets/images/astronaut.png');">
                            </button>

                        </div>
                    </div>
                    <!-- Slider-end -->
                
                </div>
                    <!-- Slider-end -->

                </div>
                <!-- interactions-end -->

    </model-viewer>

    <script type="module">
        const modelViewer = document.querySelector("model-viewer");

        window.switchSrc = (element, name) => {
            const base = "./assets/";
            modelViewer.src = base + "models/" + name + '.glb';
            modelViewer.poster = base + "images/" + name + '.png';
            const slides = document.querySelectorAll(".slide");
            slides.forEach((element) => { element.classList.remove("selected"); });
            element.classList.add("selected");


            //add sound src dynamically
            const path = "./assets/audio/";
            var audiofile = document.getElementById('sound-aud').src = path + name + '.wav';


            // ANIMATION 
            if (name == "RobotExpressive") {
                modelViewer.setAttribute("animation-name", "Running");
                modelViewer.autoplay = true;
            }
            else {
                modelViewer.setAttribute("animation-name", "false");
                modelViewer.autoplay = false;
            }
        };

        document.querySelector(".slider").addEventListener('beforexrselect', (ev) => {
            // Keep slider interactions from affecting the XR scene.
            ev.preventDefault();
        });


        function changecontext(name, type){
            document.getElementById("objname").innerHTML = name;
        }
 

    </script>

    <!-- MISC -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
    </script>
    <!-- Loads <model-viewer> for old browsers like IE11: -->
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js">
    </script>


</body>

</html>