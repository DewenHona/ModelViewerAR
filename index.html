<html>

<head>

    <title>modelViewer</title>

    <!-- CUSTOM CSS and JS -->
    <link rel="stylesheet" href="./styles.css">

    <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>

</head>

<body>
    <model-viewer src="./assets/models/sunflower.glb" poster="./assets/images/sunflower.png" shadow-intensity="1" ar
        ar-modes="webxr scene-viewer quick-look" camera-controls alt="A 3D model carousel">



        <div id="ar-prompt">
            <img src="./assets/images/hand.png">
        </div>

        <button id="ar-failure">
            AR is not tracking!
        </button>

        <!-- interactions-Start -->

        <div id="interactions">



            <!-- ArButton-start -->
            <button slot="ar-button" id="ar-button">AR</button>
            <!-- ArButton-end -->

            <!-- button audio-start -->
            <audio id="sound-aud" src="/assets/audio/sunflower.wav" preload="auto"></audio>
            <button id="sound-btn" onclick="document.getElementById('sound-aud').play();">ðŸ‘‚</button>
            <!-- button audio-end -->

            <div id="story">
                <!-- Slider-start -->
                <div class="slider">
                    <div class="slides">
                        <button class="slide selected" onclick="switchSrc(this, 'sunflower')"
                            style="background-image: url('./assets/images/sunflower.png');">
                        </button>


                        <button class="slide" onclick="switchSrc(this, 'fox')"
                            style="background-image: url('./assets/images/fox.png');">

                        </button>



                        <button class="slide" onclick="switchSrc(this, 'earth')"
                            style="background-image: url('./assets/images/earth.png');">
                        </button>

                        <button class="slide" onclick="switchSrc(this, 'ToyTrain')"
                            style="background-image: url('./assets/images/abc.png');">
                        </button>

                        <button class="slide" onclick="switchSrc(this, 'Canoe')"
                            style="background-image: url('./assets/images/abc.png');">
                        </button>
                    </div>
                </div>
                <!-- Slider-end -->

            </div>
            <!-- interactions-end -->

    </model-viewer>


    <script type="module">
        const modelViewer = document.querySelector("model-viewer");

        window.switchSrc = (element, name) => {
            const base = "./assets/";
            modelViewer.src = base + "models/" + name + '.glb';
            modelViewer.poster = base + "images/" + name + '.png';
            const slides = document.querySelectorAll(".slide");
            slides.forEach((element) => { element.classList.remove("selected"); });
            element.classList.add("selected");

            //add sound src dynamically
            const path = "./assets/audio/";
            document.getElementById('sound-aud').src = path + name + '.wav';
            //src="/assets/audio/fox.wav"
        };

        document.querySelector(".slider").addEventListener('beforexrselect', (ev) => {
            // Keep slider interactions from affecting the XR scene.
            ev.preventDefault();
        });
    </script>

    <!-- MISC -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
    </script>
    <!-- Loads <model-viewer> for old browsers like IE11: -->
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js">
    </script>


</body>

</html>